<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DyymaStudio Newswire</title>
    <link rel="icon" href="https://www.dyymastudio.site/icn.ico" type="image/x-icon">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at top, #50545a 0, #252628 35%, #111214 100%);
            color: #f5f5f5;
        }

        /* ---------------- TOP BAR ---------------- */
        .top-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 22px;
            background: rgba(15, 15, 16, 0.96);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
        }

        .top-left-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .backbtn {
            padding: 7px 16px;
            background-color: #ffffff;
            color: #000;
            border: none;
            font-size: 14px;
            font-weight: 600;
            border-radius: 999px;
            cursor: pointer;
            transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
        }

        .backbtn:hover {
            background-color: #f0f0f0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.35);
            transform: translateY(-1px);
        }

        .backbtn:active {
            transform: translateY(0);
            box-shadow: none;
        }

        .logo-text {
            font-weight: 800;
            letter-spacing: 0.08em;
            font-size: 14px;
            text-transform: uppercase;
            color: #f5f5f5;
        }

        .titlentxt {
            margin: 0;
            font-size: 22px;
            font-weight: 800;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(0,0,0,0.9);
        }

        /* ---------------- PAGE WRAPPER ---------------- */
        .page-wrapper {
            max-width: 1200px;
            margin: 20px auto 40px;
            padding: 0 18px 40px;
        }

        .page-header {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 18px;
        }

        .page-header-title {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: 0.04em;
            text-transform: uppercase;
        }

        .page-header-subtitle {
            font-size: 14px;
            color: #d0d0d0;
            max-width: 540px;
        }

        /* ---------------- FILTER BAR ---------------- */
        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
            margin-bottom: 18px;
        }

        .filter-label {
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #b5b5b5;
        }

        .filter-chip {
            border-radius: 999px;
            padding: 6px 14px;
            font-size: 13px;
            border: 1px solid rgba(255,255,255,0.12);
            background: rgba(0,0,0,0.25);
            color: #eaeaea;
            cursor: pointer;
            transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.1s ease;
        }

        .filter-chip:hover {
            transform: translateY(-1px);
            background: rgba(255,255,255,0.06);
        }

        .filter-chip.active {
            background: #f5c546;
            border-color: #f5c546;
            color: #101010;
            font-weight: 600;
        }

        /* ---------------- GRID ---------------- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
        }

        .news-item {
            background: rgba(240, 243, 250, 0.96);
            color: #111;
            border-radius: 12px;
            padding: 14px 14px 18px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.45);
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .news-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 35px rgba(0,0,0,0.7);
            background: #ffffff;
        }

        .news-item-thumb {
            width: 100%;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .news-item-thumb img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .news-topic-tag {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 3px 10px;
            border-radius: 999px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.09em;
            font-weight: 700;
            background: #111;
            color: #f5f5f5;
            margin-bottom: 4px;
        }

        .news-topic-tag.achsr {
            background: #d93b30;
        }

        .news-topic-tag.dyymastudio {
            background: #333b8a;
        }

        .news-date {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }

        .news-title {
            font-size: 16px;
            font-weight: 800;
            line-height: 1.25;
        }

        /* ---------------- MAXIMIZED VIEW ---------------- */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1100;
        }

        .maximized-news {
            width: min(900px, 95%);
            max-height: 90vh;
            background-color: #f0f3fa;
            color: #111;
            border-radius: 14px;
            padding: 18px 18px 20px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.9);
            box-sizing: border-box;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .maximized-header {
            margin-bottom: 10px;
        }

        .maximized-topic {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 3px 10px;
            border-radius: 999px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.09em;
            font-weight: 700;
            background: #111;
            color: #f5f5f5;
            margin-bottom: 6px;
        }

        .maximized-title {
            margin: 0;
            font-size: 20px;
            font-weight: 800;
        }

        #smalldate {
            margin: 2px 0 0;
            font-size: 13px;
            color: #555;
        }

        .maximized-news .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #111;
            color: white;
            border: none;
            padding: 7px 11px;
            cursor: pointer;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 700;
            transition: background 0.15s ease, transform 0.1s ease;
        }

        .maximized-news .close-btn:hover {
            background-color: #333;
            transform: translateY(-1px);
        }

        .news-iframe {
            width: 100%;
            height: 60vh;
            border: none;
            border-radius: 10px;
            background: #f5f5f8;
        }

        @media (max-width: 700px) {
            .top-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }

            .page-header-title {
                font-size: 24px;
            }

            .grid-container {
                grid-template-columns: 1fr;
            }

            .news-item-thumb img {
                height: 180px;
            }
        }
    </style>
</head>
<body>

    <!-- TOP BAR -->
    <header class="top-bar">
        <div class="top-left-group">
            <button class="backbtn" onclick="window.location.href='../'">Back</button>
            <span class="logo-text">DYYMASTUDIO</span>
        </div>
        <h1 class="titlentxt">Newswire</h1>
    </header>

    <!-- PAGE CONTENT -->
    <main class="page-wrapper">
        <section class="page-header">
            <div class="page-header-title">DyymaStudio Newswire</div>
            <p class="page-header-subtitle">
                Official announcements, updates and messages from DyymaStudio and our games.
            </p>
        </section>

        <!-- FILTERS -->
        <section class="filter-bar">
            <span class="filter-label">Filter by:</span>
            <button class="filter-chip active" data-filter="all">All</button>
            <button class="filter-chip" data-filter="DyymaStudio">DyymaStudio</button>
            <button class="filter-chip" data-filter="ACHSR">ACHSR</button>
        </section>

        <!-- GRID -->
        <section class="grid-container" id="grid-container"></section>
    </main>

    <!-- OVERLAY + MAXIMIZED ARTICLE -->
    <div class="overlay" id="overlay">
        <div class="maximized-news" id="maximized-news">
            <button class="close-btn" onclick="closeMaximized()">Ã—</button>
            <div class="maximized-header">
                <div id="maximized-topic" class="maximized-topic">GAME</div>
                <h3 id="maximized-title" class="maximized-title"></h3>
                <p id="smalldate"></p>
            </div>
            <iframe id="news-iframe" class="news-iframe"></iframe>
        </div>
    </div>

    <script>
        const newsData = [
            {
                "Title": "A Message From DyymaStudio",
                "Filename": "news7.html",
                "ImageIcon": "news_7.png",
                "Date": "November 17, 2025",
                "NewsTopic": "DyymaStudio"
            },
            {
                "Title": "v.1.4.0 is Now Coming on July 5th!",
                "Filename": "news6.html",
                "ImageIcon": "news_6.png",
                "Date": "June 28, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "v1.4.0 is Coming on July 12th!",
                "Filename": "news5.html",
                "ImageIcon": "news_5.png",
                "Date": "May 23, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "V.1.4.0 Coming Early this Summer",
                "Filename": "news4.html",
                "ImageIcon": "news_4.png",
                "Date": "May 2, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "v.1.3.0 Trailer Coming Soon",
                "Filename": "news3.html",
                "ImageIcon": "news_3.png",
                "Date": "April 7, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "A Message From DyymaStudio",
                "Filename": "news2.html",
                "ImageIcon": "news_2.png",
                "Date": "April 4, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "ACHSR v.1.3.0 Arrives on May 11th",
                "Filename": "news1.html",
                "ImageIcon": "news_1.png",
                "Date": "March 3, 2025",
                "NewsTopic": "ACHSR"
            },
            {
                "Title": "Welcome to DyymaStudio Website!",
                "Filename": "news0.html",
                "ImageIcon": "news_0.png",
                "Date": "February 19, 2025",
                "NewsTopic": "DyymaStudio"
            }
        ];

        const gridContainer = document.getElementById('grid-container');
        const overlay = document.getElementById('overlay');

        function topicClass(topic) {
            const t = topic.toLowerCase();
            if (t === 'achsr') return 'achsr';
            if (t === 'dyymastudio') return 'dyymastudio';
            return '';
        }

        function displayNews(filter = 'all') {
            gridContainer.innerHTML = '';
            newsData.forEach((news) => {
                if (filter !== 'all' && news.NewsTopic !== filter) return;

                const newsItem = document.createElement('article');
                newsItem.classList.add('news-item');
                newsItem.innerHTML = `
                    <div class="news-item-thumb">
                        <img src="${news.ImageIcon}" alt="News thumbnail">
                    </div>
                    <span class="news-topic-tag ${topicClass(news.NewsTopic)}">
                        ${news.NewsTopic}
                    </span>
                    <div class="news-date">${news.Date}</div>
                    <div class="news-title">${news.Title}</div>
                `;
                newsItem.onclick = () => openMaximized(news);
                gridContainer.appendChild(newsItem);
            });
        }

        // stile "rockstar" applicato dentro l'iframe
        function applyIframeStyles() {
            const iframe = document.getElementById('news-iframe');
            try {
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (!doc) return;

                const style = document.createElement("style");
                style.innerHTML = `
                    html, body {
                        margin: 0 !important;
                        padding: 0 !important;
                    }
                    body {
                        background: #f5f5f8 !important;
                        color: #111111 !important;
                        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif !important;
                        display: flex !important;
                        justify-content: center !important;
                        padding: 40px 16px !important;
                        line-height: 1.7 !important;
                    }
                    body > * {
                        max-width: 760px !important;
                        width: 100% !important;
                        margin-left: auto !important;
                        margin-right: auto !important;
                    }
                    h1, h2, h3, h4 {
                        font-weight: 800 !important;
                        letter-spacing: 0.02em !important;
                        margin-top: 0 !important;
                        margin-bottom: 14px !important;
                    }
                    h1 { font-size: 28px !important; }
                    h2 { font-size: 22px !important; }
                    h3 { font-size: 18px !important; }
                    p {
                        font-size: 15px !important;
                        margin: 0 0 14px 0 !important;
                        color: #222 !important;
                    }
                    a {
                        color: #0062d6 !important;
                        text-decoration: none !important;
                    }
                    a:hover {
                        text-decoration: underline !important;
                    }
                    img {
                        max-width: 100% !important;
                        height: auto !important;
                        border-radius: 6px !important;
                        display: block !important;
                        margin: 10px 0 16px 0 !important;
                    }
                    ul, ol {
                        padding-left: 22px !important;
                        margin-bottom: 14px !important;
                    }
                `;
                doc.head.appendChild(style);
            } catch (e) {
                console.error("Iframe style injection failed", e);
            }
        }

        function openMaximized(news) {
            document.getElementById('maximized-title').innerText = news.Title;
            document.getElementById('smalldate').innerText = news.Date;
            document.getElementById('maximized-topic').innerText = news.NewsTopic;
            document.getElementById('maximized-topic').className =
                'maximized-topic ' + topicClass(news.NewsTopic);

            const iframe = document.getElementById('news-iframe');
            iframe.onload = applyIframeStyles;
            iframe.src = news.Filename;

            overlay.style.display = 'flex';
        }

        function closeMaximized() {
            overlay.style.display = 'none';
        }

        // close overlay clicking outside
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) closeMaximized();
        });

        // filter buttons
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                const filter = chip.getAttribute('data-filter');
                displayNews(filter);
            });
        });

        // initial render
        displayNews();

        // open specific news via ?new=index
        window.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            if (params.has("new")) {
                const idx = parseInt(params.get("new"), 10);
                if (!Number.isNaN(idx) && newsData[idx]) {
                    openMaximized(newsData[idx]);
                }
            }
        });
    </script>
</body>
</html>
